<!DOCTYPE html>
<html>

<head>
    <title>Liste čekanja</title>
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">
	  <link href="css/style.css" rel="stylesheet" type="text/css"/>

    <link href="https://fonts.googleapis.com/css?family=Indie+Flower|PT+Sans+Narrow" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

    <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel = "stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>




    <script  type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.min.js"></script>
    <script type="text/javascript">

        $('#typeahead').typeahead({
            name: 'zahvati',
            remote: 'http://localhost:8080/search?key=%QUERY',
            limit: 10
        });

    </script>
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <style type="text/css">
    .bs-example{
    	font-family: sans-serif;
    	position: relative;
    	margin: 50px;
    }
    .typeahead, .tt-query, .tt-hint {
    	border: 2px solid #CCCCCC;
    	border-radius: 8px;
    	font-size: 14px;
    	height: 30px;
    	line-height: 30px;
    	outline: medium none;
    	padding: 2px 12px;
    	width: 250px;
      color: #33a6cc;
      font-weight: bold;
    }
    .typeahead {
    	background-color: #FFFFFF;
    }
    .typeahead:focus {
    	border: 2px solid #0097CF;
    }
    .tt-query {
    	box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset;
    }
    .tt-hint {
    	color: #999999;
    }
    .tt-dropdown-menu {
    	background-color: #FFFFFF;
    	border: 1px solid rgba(0, 0, 0, 0.2);
    	border-radius: 8px;
    	box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
    	margin-top: 12px;
    	padding: 8px 0;
    	width: 422px;
    }
    .tt-suggestion {
    	font-size: 14px;
    	line-height: 24px;
    	padding: 3px 20px;
    }
    .tt-suggestion.tt-is-under-cursor {
    	background-color: #0097CF;
    	color: #FFFFFF;
    }
    .tt-suggestion p {
    	margin: 0;
    }
    </style>
</head>

<body>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
          <div id="arrows-1">
              <a id="menu-double" style="width:150px">
                  <i id="icon" class="fa fa-arrow-left fa-2x" aria-hidden="true"></i>
                  <p id="maps-link" style="display:inline-block;"> PRIKAŽI NA KARTI </p>
              </a>
              <a id="menu-toggle2" style="width:150px">
                  <i class="fa fa-arrow-right fa-2x" aria-hidden="true"></i>
                  <p style="display:inline-block"> POČETNA </p>
              </a>
          </div>
          <div id = "sidebar-content-wrapper">
            <div id="scroll-box">
              <% include partials/div.ejs %>
            </div>
        	    <div id = "maps-box">
        	    </div>
          </div>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
                    <div class="bodyOne">
                        <nav>
                          <ol>
						   <li type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModalStanje"> Pregled stanja</li>
                            <li type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModalAbout"> O nama</li>
                           <li type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Ocijeni</li>
                          </ol>
                        </nav>
                        <div id="myModal" class="modal fade" role="dialog">
                      <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                          <div class="modal-header">

                            <h4 class="modal-title">Ocijenite ustanovu</h4>
                          </div>
                          <div class="modal-body">
                             Ocjenjujući ustanovu u kojoj ste imali pregled pridonesite kvaliteti pretraživanja.
                            <div>
			      <form id="myform" action="/rate">
                              Odaberite ustanovu:<span class="star">*</span>
                              <div class="display"><input name="ustanovaInp" type="text" required><br/></div>
                              Odaberite zahvat:<span class="star">*</span>
                              <div class="display"><input name="zahvatInp" type="text" required><br/></div>
				Spol:
                              	<div class="display">
					<select name="spol" id="selector2">
						   <option value="M">M</option>
						   <option value="Ž">Ž</option>
					 </select>
				 </div>
				Dobna skupina:
                                <div class="display">
					<select name="age" id="selector3">
						   <option value=" - 18"> - 18</option>
						   <option value="19-25">19-25</option>
						   <option value="26-35">26-35</option>
						   <option value="36-50">36-50</option>
						   <option value="50 -">50 -</option>
					</select>
				</div>
                 		Ocijenite ukupno zadovoljstvo:<span class="star">*</span>
				<span name="ukupnoZadovoljstvo" id="ukupnoZadovoljstvo" class="rating">
					<input value="5" type="radio" class="rating-input"
					    id="rating-input-1-5" name="rating_input_1" required>
					<label for="rating-input-1-5" class="rating-star"></label>
					<input value="4" type="radio" class="rating-input"
					    id="rating-input-1-4" name="rating_input_1">
					<label for="rating-input-1-4" class="rating-star"></label>
					<input value="3" type="radio" class="rating-input"
					    id="rating-input-1-3" name="rating_input_1">
					<label for="rating-input-1-3" class="rating-star"></label>
					<input value="2" type="radio" class="rating-input"
					    id="rating-input-1-2" name="rating_input_1">
					<label for="rating-input-1-2" class="rating-star"></label>
					<input value="1" type="radio" class="rating-input"
					    id="rating-input-1-1" name="rating_input_1">
					<label for="rating-input-1-1" class="rating-star"></label>
				</span> <br/>
                              	Ocijenite profesionalnost osoblja:<span class="star">*</span>
                          	<span name="profesionalnost" id="profesionalnost"class="rating">
					<input value="5" type="radio" class="rating-input"
					    id="rating-input-2-5" name="rating_input_2" required>
					<label for="rating-input-2-5" class="rating-star"></label>
					<input value="4" type="radio" class="rating-input"
					    id="rating-input-2-4" name="rating_input_2">
					<label for="rating-input-2-4" class="rating-star"></label>
					<input value="3" type="radio" class="rating-input"
					    id="rating-input-2-3" name="rating_input_2">
					<label for="rating-input-2-3" class="rating-star"></label>
					<input value="2" type="radio" class="rating-input"
					    id="rating-input-2-2" name="rating_input_2">
					<label for="rating-input-2-2" class="rating-star"></label>
					<input value="1" type="radio" class="rating-input"
					    id="rating-input-2-1" name="rating_input_2">
					<label for="rating-input-2-1" class="rating-star"></label>
				</span> <br/>
				Ocijenite kvalitetu prostora:<span class="star">*</span>
				<span name="prostor" id="prostor" class="rating">
					<input value="5" type="radio" class="rating-input"
					    id="rating-input-3-5" name="rating_input_3" required>
					<label for="rating-input-3-5" class="rating-star"></label>
					<input value="4" type="radio" class="rating-input"
					    id="rating-input-3-4" name="rating_input_3">
					<label for="rating-input-3-4" class="rating-star"></label>
					<input value="3" type="radio" class="rating-input"
					    id="rating-input-3-3" name="rating_input_3">
					<label for="rating-input-3-3" class="rating-star"></label>
					<input value="2" type="radio" class="rating-input"
					    id="rating-input-3-2" name="rating_input_3">
					<label for="rating-input-3-2" class="rating-star"></label>
					<input value="1" type="radio" class="rating-input"
					    id="rating-input-3-1" name="rating_input_3">
					<label for="rating-input-3-1" class="rating-star"></label>
				</span> <br/>
				<button type = "submit" id= "batn"> Ocijeni </button>
        <script>
        $(document).ready(function(){
        $('#myform').on('submit', function (event) {
          event.preventDefault(); // Stop the form from causing a page refresh.
          var data = {
          nazivUStanove: $("input[name=ustanovaInp]").val(),
					nazivZahvata: $("input[name=zahvatInp]").val(),
          spol: $('#selector2').val(),
				  age: $('#selector2').val(),
          ukupnoZadovoljstvo: $("#ukupnoZadovoljstvo input[type='radio']:checked").val(),
          profesionalnost: $("#profesionalnost input[type='radio']:checked").val(),
          ukupnoZadovoljstvo: $("#prostor input[type='radio']:checked").val()


                  };
                data = $(this).serialize();
                                    //inputdata = JSON.stringify(inputdata);
                $.ajax({
                method: 'POST',
                url: '/rate',
                data: data,

                success: function(data) {
                alert("SUCCESS: " + data);

                            },
                    error: function(xhr, status, error) {
                    alert(xhr.responseText, status, error); // error occur
                      }
                    })
                  });
                  });
                    </script>
                    </form>
			     </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal"> Zatvori </button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div id="myModalAbout" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">O nama</h4>
                      </div>
                      <div class="modal-body">
                        Liste čekanja je javno dostupan web portal za pretraživanje i pregledavanje lista čekanja na
						zahvate u bolnicama. Omogućava Vam jedinstveno i transparentno mjesto za pretraživanje i
						pregledavanje lista čekanja kako biste lakše odradili potreban zahvat.
						Kako biste pronašli optimalnu bolnicu odaberite željni način pretraživanja:
						prema najbržem slobodnom terminu, najbližoj ustanovi, ili najbolje ocijenjenoj ustanovi.
						Molim Vas da nakon obavljenog zahvata na ovoj stranici anonimno ocijenite zadovoljstvo usluge i tako
						pridonesete kvaliteti pretraživanja.
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"> Zatvori </button>
                      </div>
                    </div>
                    </div>
                    </div>
				<div id="myModalStanje" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Pregled stanja</h4>
                      </div>
                      <div class="modal-body">
                        Odaberite kriterij pregleda stanja:
				  <div class="display">
                                    <select id="selector_stanja" name="item2" type ="text">
                                           <option value="7">Pojedini zahvat</option>
                                           <option value="8">Pojedine grupe zahvata</option>
                                           <option value="9">Za pojedinu bolnicu</option>
                                    </select>
                                  </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"> Zatvori </button>
                      </div>
                    </div>
                    </div>
                </div>
                        <div id="main">
                          <div ID="text">
                            <h1 class="h1One"> <br/>  LISTE ČEKANJA </h1> <br/>
                            <h4> Ovdje pretražite optimalnu bolnicu za traženi zahvat. </h4>
                          </div>
                              <figcaption>
                                <form id ="forma1" >
                                  <p> ODABERITE ZAHVAT: </p>
                                    <input id="tags" class = "typeahead tt query" autocomplete = "off" type ="text" type="search" name="item" required>
                                    
                                  <br/>
                                  <p> ODABERITE NAČIN PRETRAŽIVANJA: </p>
                                    <select id="selector" class = "typeahead tt query" name="item1" type ="text">
                                           <option value="1">PRVI SLOBODAN TERMIN</option>
                                           <option value="2">NAJBLIŽA USTANOVA</option>
                                           <option value="3">NAJBOLJE OCIJENJENA USTANOVA</option>
                                    </select>
                                    <div id="2" class="adresa">
                                      <p> UNESITE SVOJU ADRESU: </p>
                                      <input id = "adr" class = "typeahead tt query" type="text">
                                    </div>
                                    <div id="3" class="ocjena">
                                    <p>  ODABERITE KRITERIJ: </p>
                                      <select class = "typeahead tt query" id="selector1" name="item2" type ="text">
                                             <option value="4" selected>UKUPNO ZADOVOLJSTVO</option>
                                             <option value="5">PROFESIONALNOST OSOBLJA</option>
                                             <option value="6">KVALITETA PROSTORA</option>
                                      </select>
                                    </div>
                                  <button value="submit" id="menu-toggle1" style="display: block; margin: 0 auto"> <i class="fa fa-search" aria-hidden="true"></i></button>
                                <script>
                                  $('#forma1').on('submit', function (event) {
                                    event.preventDefault(); // Stop the form from causing a page refresh.
                                    var data = {
                                      txtInput: $("input[name=item]").val(),
                                      searchOption: $('#selector').val(),
                                      stateSelector: $('#selector_stanja').val()
                                    };
                                    data = $(this).serialize();
                                    //inputdata = JSON.stringify(inputdata);
                                    $.ajax({
                                      method: 'POST',
                                      url: '/',
                                      data: data,
                                      dataType: 'json',
                                      success: function(response) {
                                        alert("SUCCESS: " + JSON.stringify(response));
                                        $('div[class=box]').html(JSON.stringify(response));
                                      },
                                      error: function(xhr, status, error) {
                                          alert(xhr.responseText, status, error); // error occur
                                      }
                                    })
                                  });
                                </script>


                                </form>
                              </figcaption>
                        </div>
                    </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->



    <!-- Bootstrap Core JavaScript<script src="js/norefresh.js"></script> -->


    <!-- Animations Script -->
    <script src="js/functions.js"></script>


    <!-- Google Maps -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBL4gJYhG0_-XBNRN3XQ7qwZG5Yr2ZYIsM&callback=myMap"></script>


  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
</body>

</html>
